---
phase: 04-design-and-styling
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - app/(marketing)/blog/page.tsx
  - app/(marketing)/blog/[slug]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Blog listing page shows a branded page header with honeycomb texture, title, and subtitle"
    - "Blog listing page displays posts as a responsive card grid (1 col mobile, 2 col md, 3 col lg) with featured image thumbnails, title, excerpt, author, and date"
    - "Blog post page renders rich text body with prose-amber brand styling"
    - "Blog post page shows a featured author bio card with avatar, name, role, and bio"
    - "All blog pages have Navbar at top and Footer at bottom via BlogPageChrome"
    - "No raw Tailwind gray classes remain on any blog page"
  artifacts:
    - path: "app/(marketing)/blog/page.tsx"
      provides: "Branded blog listing with card grid, hero header, and pagination"
      contains: "BlogPageChrome"
    - path: "app/(marketing)/blog/[slug]/page.tsx"
      provides: "Styled blog post with prose-amber, author card, and featured image"
      contains: "prose-amber"
  key_links:
    - from: "app/(marketing)/blog/page.tsx"
      to: "components/BlogPageChrome.tsx"
      via: "import"
      pattern: "import.*BlogPageChrome"
    - from: "app/(marketing)/blog/[slug]/page.tsx"
      to: "components/BlogPageChrome.tsx"
      via: "import"
      pattern: "import.*BlogPageChrome"
---

<objective>
Restyle the blog listing page and blog post page with full brand design: card grid, hero headers, prose-amber typography, author bio cards, and BlogPageChrome wrapper.

Purpose: The blog pages currently use raw Tailwind grays and bare HTML. This transforms them into polished, on-brand pages consistent with the PackBee landing page.
Output: Both blog page files restyled in-place with brand tokens, no new route files needed.
</objective>

<execution_context>
@/Users/alexander/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexander/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-design-and-styling/04-RESEARCH.md
@.planning/phases/04-design-and-styling/04-01-SUMMARY.md

@app/(marketing)/blog/page.tsx
@app/(marketing)/blog/[slug]/page.tsx
@app/globals.css
@components/BlogPageChrome.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restyle blog listing page with card grid and branded header</name>
  <files>app/(marketing)/blog/page.tsx</files>
  <action>
Restyle the blog listing page in-place. Keep ALL existing data fetching logic, Payload queries, and metadata export unchanged. Only modify imports and the returned JSX.

**Add imports:**
- `import { BlogPageChrome } from '@/components/BlogPageChrome'`

**Wrap everything in BlogPageChrome:**
The entire return value should be wrapped in `<BlogPageChrome>...</BlogPageChrome>`.

**Branded page header (replace the plain h1):**
```tsx
<section className="relative bg-[var(--color-section-b)] bg-honeycomb overflow-hidden py-16 px-6">
  <div className="relative max-w-4xl mx-auto text-center">
    <h1 className="text-4xl md:text-5xl font-bold text-[var(--color-text-primary)] mb-4">Blog</h1>
    <p className="text-lg text-[var(--color-text-secondary)]">Insights and tutorials for e-commerce fulfillment</p>
  </div>
</section>
```

**Card grid (replace the border-b list):**
Replace the `<div>` containing the `posts.docs.map(...)` with a responsive card grid:
```tsx
<div className="max-w-6xl mx-auto px-6 py-12">
  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {posts.docs.map((post) => {
      // ... keep existing authorName, featuredImage, formattedDate logic ...
      return (
        <article key={post.id} className="bg-white rounded-2xl shadow-sm border border-[var(--color-border)] overflow-hidden hover:shadow-md transition-shadow">
          {featuredImage?.url && (
            <img src={featuredImage.url} alt={featuredImage.alt ?? ''} className="w-full h-48 object-cover" />
          )}
          <div className="p-5">
            <h2 className="font-semibold text-[var(--color-text-primary)] mb-2 line-clamp-2">
              <Link href={`/blog/${post.slug}`} className="hover:text-[var(--color-primary-700)] transition-colors">
                {post.title}
              </Link>
            </h2>
            {post.excerpt && (
              <p className="text-sm text-[var(--color-text-secondary)] line-clamp-3 mb-4">{post.excerpt}</p>
            )}
            <div className="text-xs text-[var(--color-text-muted)] flex gap-2">
              {authorName && <span>{authorName}</span>}
              {authorName && formattedDate && <span>&middot;</span>}
              {formattedDate && <span>{formattedDate}</span>}
            </div>
          </div>
        </article>
      )
    })}
  </div>
</div>
```

**Empty state:** Replace `text-gray-500` with `text-[var(--color-text-muted)]`.

**Pagination controls:** Restyle with brand tokens:
- Replace `hover:bg-gray-50` with `hover:bg-[var(--color-surface-50)]`
- Replace `text-gray-500` with `text-[var(--color-text-muted)]`
- Add `border-[var(--color-border)]` to border elements
- Add `text-[var(--color-text-primary)]` to Previous/Next links
- Use `rounded-xl` for pagination buttons

**Cross-navigation tab strip (below page header, above card grid):**
Add a simple tab bar indicating Blog is the active section:
```tsx
<div className="border-b border-[var(--color-border)] bg-white">
  <div className="max-w-6xl mx-auto px-6 flex gap-6">
    <Link href="/blog" className="py-3 text-sm font-medium border-b-2 border-[var(--color-primary-500)] text-[var(--color-text-primary)]">
      Blog
    </Link>
    <Link href="/help" className="py-3 text-sm font-medium border-b-2 border-transparent text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] transition-colors">
      Help Center
    </Link>
  </div>
</div>
```

**CRITICAL: Do NOT change any Payload query logic, metadata export, or data processing. Only modify imports and JSX structure/classes.**
  </action>
  <verify>
- `grep -c "gray-" app/\(marketing\)/blog/page.tsx` returns 0
- `grep -c "BlogPageChrome" app/\(marketing\)/blog/page.tsx` returns at least 1
- `grep -c "bg-honeycomb" app/\(marketing\)/blog/page.tsx` returns at least 1
- `grep -c "grid-cols" app/\(marketing\)/blog/page.tsx` returns at least 1
  </verify>
  <done>Blog listing page renders with branded amber header with honeycomb, responsive card grid for posts, cross-navigation tab strip, styled pagination, and no raw gray classes.</done>
</task>

<task type="auto">
  <name>Task 2: Restyle blog post page with prose-amber, featured image, and author bio card</name>
  <files>app/(marketing)/blog/[slug]/page.tsx</files>
  <action>
Restyle the blog post page in-place. Keep ALL existing data fetching, React.cache(), generateStaticParams, generateMetadata, JSON-LD generation, and relationship resolution unchanged. Only modify imports and the returned JSX of the page component.

**Add imports:**
- `import { BlogPageChrome } from '@/components/BlogPageChrome'`

**Wrap in BlogPageChrome:**
The entire return value (including the `<script>` tag for JSON-LD) should be inside `<BlogPageChrome>`.

**Post layout — single column, max-w-2xl, centered:**
```tsx
<BlogPageChrome>
  <script type="application/ld+json" ... />

  <article className="max-w-2xl mx-auto px-4 py-12">
    {/* Featured image — contained with rounded corners */}
    {featuredImage?.url && (
      <div className="mb-8 rounded-2xl overflow-hidden">
        <img src={featuredImage.url} alt={featuredImage.alt ?? ''} className="w-full h-64 md:h-96 object-cover" />
      </div>
    )}

    <h1 className="text-3xl md:text-4xl font-bold text-[var(--color-text-primary)] mb-4">{post.title}</h1>

    <div className="flex gap-3 text-sm text-[var(--color-text-muted)] mb-8 pb-8 border-b border-[var(--color-border)]">
      {author && <span>{author.name}</span>}
      {author && formattedDate && <span>&middot;</span>}
      {formattedDate && <span>{formattedDate}</span>}
    </div>

    {/* Rich text body with prose-amber */}
    {post.body && (
      <div className="prose prose-lg prose-amber max-w-none">
        <RichText data={post.body} />
      </div>
    )}

    {/* Featured author bio card */}
    {author && (
      <div className="mt-12 p-6 bg-[var(--color-section-d)] rounded-2xl border border-[var(--color-border)] flex gap-4 items-start">
        {authorAvatar?.url && (
          <img src={authorAvatar.url} alt={author.name} className="w-16 h-16 rounded-full object-cover flex-shrink-0" />
        )}
        <div>
          <strong className="block text-base font-semibold text-[var(--color-text-primary)]">{author.name}</strong>
          {author.role && <span className="text-sm text-[var(--color-text-secondary)] block mb-1">{author.role}</span>}
          {author.bio && <p className="text-sm text-[var(--color-text-secondary)] mt-1">{author.bio}</p>}
        </div>
      </div>
    )}
  </article>
</BlogPageChrome>
```

**Token replacements:**
- `text-gray-500` -> `text-[var(--color-text-muted)]`
- `text-gray-600` -> `text-[var(--color-text-secondary)]`
- `border-t` -> `border-b border-[var(--color-border)]` (or appropriate border with token)
- `prose prose-lg max-w-none` -> `prose prose-lg prose-amber max-w-none`

**CRITICAL: Do NOT change React.cache() queryPostBySlug, generateStaticParams, generateMetadata, or JSON-LD logic. Only modify imports and the JSX returned by the page component.**
  </action>
  <verify>
- `grep -c "gray-" app/\(marketing\)/blog/\[slug\]/page.tsx` returns 0
- `grep -c "prose-amber" app/\(marketing\)/blog/\[slug\]/page.tsx` returns at least 1
- `grep -c "BlogPageChrome" app/\(marketing\)/blog/\[slug\]/page.tsx` returns at least 1
- `grep -c "color-section-d" app/\(marketing\)/blog/\[slug\]/page.tsx` returns at least 1 (author bio card)
  </verify>
  <done>Blog post page renders with contained featured image hero, prose-amber rich text body, featured author bio card with warm background, all brand tokens, and Navbar/Footer via BlogPageChrome.</done>
</task>

</tasks>

<verification>
1. `grep -r "gray-\|yellow-400\|yellow-500" "app/(marketing)/blog/"` returns 0 matches
2. Both blog pages import and use BlogPageChrome
3. Blog listing has card grid with `grid-cols-1 md:grid-cols-2 lg:grid-cols-3`
4. Blog post uses `prose prose-lg prose-amber` on the RichText wrapper
5. Blog post has featured author bio card with `bg-[var(--color-section-d)]`
6. `npx next build` completes without errors
</verification>

<success_criteria>
- Blog listing page: branded header with honeycomb, card grid layout, cross-nav tabs, styled pagination, all brand tokens
- Blog post page: featured image hero, prose-amber rich text, featured author bio card, all brand tokens
- Both pages wrapped in BlogPageChrome (Navbar + Footer)
- Zero raw gray/yellow classes remain
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/04-design-and-styling/04-02-SUMMARY.md`
</output>
